<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNO Game System Admin</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css">
    <link rel="icon" href="/UNO.icon" type="image/x-icon">
    <script defer src="/script.js"></script>
  </head>

  <body>
    <div id="grid-container">

      <!-- Header Section  -->
      <%- include("partials/header") %>

        <!-- Sidebar Section  -->
        <%- include("partials/sidebar") %>

          <!-- Main Section -->
          <main class="grid-main">
            <div class="main-body" data-main-body>
              <div class="table-container-secondary">
                <div class="main-body-header">
                  <h2 class="main-title">RECENT STORES</h2>
                </div>
                <div class="scrollable-table">
                  <table class="table">
                    <thead>
                      <tr>
                        <th>Store ID</th>
                        <th>Number of Items</th>
                        <th>Linked To</th>
                        <th>Actions</th>
                      </tr>
                    </thead>
                    <tbody>
                      <% locals.recentStores.forEach(element=> { %>
                        <tr>
                          <td>
                            <%= element.storeID %>
                          </td>
                          <td>
                            <%= element.numOfItems %>
                          </td>
                          <td>
                            <%= element.username %>
                          </td>
                          <td class="table-btn-td">
                            <button class="table-btn" onclick="showStoreItemsModal('<%= element.storeID %>')">
                              View Available Store Items
                            </button>
                          </td>
                        </tr>
                        <% }) %>
                    </tbody>
                  </table>
                </div>
              </div>
              <br><br>
              <div class="table-container-secondary">
                <div class="main-body-header">
                  <h2 class="main-title">RECENT ITEMS</h2>
                  <div class="table-button-list">
                    <div class="dropdown-container">
                      <p class="dropdown-title">Sort By:</p>
                      <select name="dropdown" class="dropdown" data-dropdown data-pointer-not-allowed>
                        <option value="recent">Recent</option>
                        <option value="quality">Quality</option>
                        <option value="currentPrice">Current Price</option>
                        <option value="discount">Discount</option>
                      </select>
                    </div>
                    <button class="table-btn add-btn" onclick="showCreateItemModal()"><i class="bx bx-plus"></i>Create
                      Item</button>
                  </div>
                </div>
                <div class="scrollable-table">
                  <table class="table">
                    <thead>
                      <tr>
                        <th>Name</th>
                        <th>Quality</th>
                        <th>Current Price</th>
                        <th>Original Price</th>
                        <th>Applied Promotion</th>
                        <th>Discount</th>
                        <th>Actions</th>
                      </tr>
                    </thead>
                    <tbody>
                      <% locals.recentItems.forEach(element=> { %>
                        <tr>
                          <td>
                            <%= element.itemName %>
                          </td>
                          <td>
                            <%= element.itemQuality %>
                          </td>
                          <td>
                            <%= element.itemCurrentPrice %>
                          </td>
                          <td>
                            <%= element.itemOriginalPrice %>
                          </td>
                          <td>
                            <%= element.itemAppliedPromotion %>
                          </td>
                          <td>
                            <%= element.itemDiscount %>
                          </td>
                          <td>
                            <i class='bx bx-log-in add' aria-label="Add"
                              onclick="showInsertItemModal('<%= element.itemID %>')" data-insert
                              data-pointer-not-allowed></i>
                            <i class='bx bxs-edit edit' aria-label="Edit"
                              onclick="showEditItemModal('<%= element.itemID %>')" data-edit
                              data-pointer-not-allowed></i>
                            <i class='bx bx-trash delete' aria-label="Delete"
                              onclick="showDeleteItemModal('<%= element.itemID %>')" data-delete
                              data-pointer-not-allowed></i>
                          </td>
                        </tr>
                        <% }) %>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            <form class="modal create-item-modal" action="/store-items" method="POST" data-create-item-modal>
              <div class="modal-header">
                <h2>Add Item</h2>
                <button class="close-btn" type="button" onclick="hideCreateItemModal()">&times;</button>
              </div>
              <div class="modal-body">
                <div class="modal-fields">
                  <label for="itemNameCreate">Name: </label>
                  <input type="text" id="itemNameCreate" name="name" aria-label="item name" data-save-input>
                </div>
                <div class="modal-fields">
                  <label for="itemQuality">Quality: </label>
                  <select id="itemQuality" name="quality" class="dropdown" data-save-input>
                    <option value="Common">Common</option>
                    <option value="Uncommon">Uncommon</option>
                    <option value="Rare">Rare</option>
                    <option value="Epic">Epic</option>
                    <option value="Legendary">Legendary</option>
                  </select>
                </div>
                <div class="modal-fields">
                  <label for="appliedPromotion">Applied Promotion: </label>
                  <select id="appliedPromotion" name="appliedPromotion" class="dropdown" data-save-input>
                    <option value="New Year Sale" selected>New Year Sale</option>
                    <option value="Christmas Sale">Christmas Sale</option>
                    <option value="Summer Sale">Summer Sale</option>
                    <option value="Autumn Sale">Autumn Sale</option>
                    <option value="Winter Sale">Winter Sale</option>
                    <option value="Spring Sale">Spring Sale</option>
                  </select>
                  <span id="discount" data-save-input class="modal-fields">xxx percent off</span>
                </div>

              </div>
              <div class="modal-footer">
                <button class="btn modal-btn-confirm" type="submit">Register</button>
                <button class="btn modal-btn-cancel" type="button" onclick="hideCreateItemModal()">Cancel</button>
              </div>
              <div class="modal-error-message" data-modal-error-message></div>
            </form>
            <div class="modal delete-item-modal" data-delete-item-modal>
              <h1>&#9888</h1>
              <h2>Are you sure?</h2>
              <p>This action cannot be undone. All values <br> associated with this field will be lost.</p>
              <button class="btn modal-btn-delete" type="button" data-conform-delete>Delete Player</button>
              <button class="btn modal-btn-cancel" type="button" onclick="hideDeleteItemModal()">Cancel</button>
              <div class="modal-error-message" data-modal-error-message></div>
            </div>

            <form class="modal edit-item-modal" action="/store-items/update" method="POST" data-edit-item-modal>
              <div class="modal-header">
                <h2>Edit Item</h2>
                <button class="close-btn" type="button" onclick="hideEditItemModal()">&times;</button>
              </div>
              <div class="modal-body">
                <div class="modal-fields">
                  <label for="itemNameEdit">Name: </label>
                  <input type="text" id="itemNameEdit" name="name" aria-label="item name" data-save-input>
                  <input type="hidden" id="itemIDEdit" name="itemID" data-save-input>
                </div>
                <div class="modal-fields">
                  <label for="itemQualityEdit">Quality: </label>
                  <select id="itemQualityEdit" name="quality" class="dropdown" data-save-input>
                    <option value="Common">Common</option>
                    <option value="Uncommon">Uncommon</option>
                    <option value="Rare">Rare</option>
                    <option value="Epic">Epic</option>
                    <option value="Legendary">Legendary</option>
                  </select>
                </div>
                <div class="modal-fields">
                  <label for="appliedPromotionEdit">Applied Promotion: </label>
                  <select id="appliedPromotionEdit" name="appliedPromotion" class="dropdown" data-save-input>
                    <option value="New Year Sale" selected>New Year Sale</option>
                    <option value="Christmas Sale">Christmas Sale</option>
                    <option value="Summer Sale">Summer Sale</option>
                    <option value="Autumn Sale">Autumn Sale</option>
                    <option value="Winter Sale">Winter Sale</option>
                    <option value="Spring Sale">Spring Sale</option>
                  </select>
                  <span id="discountEdit" data-save-input class="modal-fields">xxx percent off</span>
                </div>
              </div>
              <div class="modal-footer">
                <button class="btn modal-btn-confirm" type="submit">Update</button>
                <button class="btn modal-btn-cancel" type="button" onclick="hideEditItemModal()">Cancel</button>
              </div>
              <div class="modal-error-message" data-modal-error-message></div>
            </form>

            <form class="modal insert-item-modal" action="/store-items/insert" method="POST" data-insert-item-modal>
              <div class="modal-header">
                <h2>Insert Item to Shop</h2>
                <button class="close-btn" type="button" onclick="hideInsertItemModal()">&times;</button>
              </div>
              <div class="modal-body">
                <input type="hidden" id="itemIDInsert" name="itemID" data-save-input>
                <div class="modal-fields">
                  <label for="insertUsername">Insert to player: </label>
                  <input type="text" id="insertUsername" name="username" aria-label="player username" data-save-input>
                </div>
              </div>
              <div class="modal-error-message" data-modal-error-message></div>
              <div class="modal-footer">
                <button class="btn modal-btn-confirm" type="submit">Update</button>
                <button class="btn modal-btn-cancel" type="button" onclick="hideInsertItemModal()">Cancel</button>
              </div>
            </form>

            <div class="store-items" data-store-items-modal>
              <div class="store-items-header">
                <h2 id="storeItemsModalHeader">Items in Store</h2>
                <button class="close-btn" type="button" onclick="hideStoreItemsModal()">&times;</button>
              </div>
              <div class="scrollable-table">
                <table class="table">
                  <thead>
                    <tr>
                      <th>Item ID</th>
                      <th>Item Name</th>
                      <th>Item Quality</th>
                      <th>Item Current Price</th>
                      <th>Item Original Price</th>
                      <th>Item Applied Promotion</th>
                      <th>Item Discount</th>
                    </tr>
                  </thead>
                  <tbody id="storeItemsTable">
                    <!-- filled by js -->
                  </tbody>
                </table>
              </div>
            </div>
          </main>

          <!-- Footer Section -->
          <%- include("partials/footer") %>
    </div>
  </body>

</html>
